<Project ToolsVersion="14.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <!--BloonsTD6 property gets automatically set correctly when this file is generated by the Mod Helper on startup-->
        <BloonsTD6>C:\Program Files\Epic Games\BloonsTD6\</BloonsTD6>
        <Il2CppAssemblies>$(BloonsTD6)\MelonLoader\Il2CppAssemblies</Il2CppAssemblies>
        <ManagedFolder>$(BloonsTD6)\MelonLoader\Managed</ManagedFolder>
        <OutputFolder Condition="'$(OutputFolder)' == ''">Mods</OutputFolder>
    </PropertyGroup>

    <!--References to MelonLoader dependencies-->
    <ItemGroup>
        <Reference Include="$(BloonsTD6)\MelonLoader\net6\MelonLoader.dll" Private="false"/>
        <Reference Include="$(BloonsTD6)\MelonLoader\net6\0Harmony.dll" Private="false"/>
    </ItemGroup>

    <!--References to BTD6 dependencies-->
    <ItemGroup Condition="'$(JustMelonloader)' != 'true'">
        <Reference Include="$(Il2CppAssemblies)\Assembly-CSharp.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2Cppmscorlib.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2CppSystem.Core.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2CppSystem.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2CppNinjaKiwi.Common.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2CppNinjaKiwi.LiNK.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Unity.InputSystem.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Unity.ResourceManager.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Unity.TextMeshPro.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.AnimationModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.AssetBundleModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.AudioModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.CoreModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.InputLegacyModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.ImageConversionModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.JSONSerializeModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.TextRenderingModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.UI.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.UIElementsModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.UIModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2CppNewtonsoft.Json.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Unity.Addressables.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.IMGUIModule.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2CppFacepunch.Steamworks.dll" Private="false"/>
        <Reference Include="$(Il2CppAssemblies)\Il2CppUniWebView-CSharp.dll" Private="false"/>
        
        
        <Reference Include="$(Il2CppAssemblies)\Il2Cppcom.playeveryware.eos.dll" Private="false"/>
        
        <Reference Include="$(Il2CppAssemblies)\UnityEngine.Purchasing.dll" Private="false"/>

        <Reference Include="$(ManagedFolder)\UnityEngine.Il2CppAssetBundleManager.dll" Private="false"/>
        <Reference Include="$(ManagedFolder)\UnityEngine.Il2CppImageConversionManager.dll" Private="false"/>
        <Reference Include="$(ManagedFolder)\ValueTupleBridge.dll" Private="false"/>
        <Reference Include="$(ManagedFolder)\Newtonsoft.Json.dll" Private="false"/>

        <Reference Include="$(BloonsTD6)\MelonLoader\net6\Il2CppInterop.Runtime.dll" Private="false"/>
    </ItemGroup>


    <!--Post build events to copy dll/xml to mods folder. Works even if game is currently running-->
    <Target Name="MoveDllToMods" AfterTargets="Build" Condition="Exists('$(TargetDir)$(TargetName).dll')">
        <Message Text="Copying $(ProjectName).dll to $(OutputFolder) Folder..." Importance="High"/>
        
        <Copy SourceFiles="$(TargetDir)$(TargetName).dll" DestinationFiles="$(BloonsTD6)\$(OutputFolder)\$(ProjectName).dll"/>
        
    </Target>
</Project>